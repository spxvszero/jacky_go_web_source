<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="jsscript/pell.min.css">
    <link rel="stylesheet" href="jsscript/bootstrap.min.css">
    <script src="jsscript/jquery-3.4.1.slim.min.js"></script>
    <script src="jsscript/popper.min.js"></script>
    <script src="jsscript/bootstrap.min.js"></script>

    <title>Edit Page</title>

    <script src="jsscript/turndown.js"></script>
    <style>
        .pell-content {
            height: 300px;
        }
        .pell{
            background-color: white;
        }
        .editor-container{

        }
        .editor-previewer{
            overflow: scroll;
            /*height: calc(100vh - 300px);*/
        }

    </style>
</head>
<body>

<div class="editor-container container-fluid">


    <div id="previewer-title" class="row">
        <div class="col-4">
            HTML output:
        </div>

        <div class="col-4">
            Markdown output:
        </div>

        <div class="col-4">
            Text output:
        </div>
    </div>
    <div class="row">
        <div class="editor-previewer col-4">
<!--            HTML output:-->
            <div id="pell-html-output" class="pell-html-output" style="white-space:pre-wrap;"></div>
        </div>

        <div class="editor-previewer col-4">
<!--            Markdown output:-->
            <div id="pell-markdown-output" class="pell-html-output" style="white-space:pre-wrap;"></div>
        </div>

        <div class="editor-previewer col-4">
<!--            Text output:-->
            <div id="pell-text-output" class="pell-html-output" style="white-space:pre-wrap;"></div>
        </div>

    </div>

</div>

<div  class="container">
    <div id="pell-editor" class="pell fixed-bottom"></div>
</div>




<script src="jsscript/pell.min.js"></script>
<script>
    //turndown markdown to html
    var turndownService = new TurndownService()

    // Initialize pell on an HTMLElement
    pell.init({
        // <HTMLElement>, required
        element: document.getElementById('pell-editor'),

        // <Function>, required
        // Use the output html, triggered by element's `oninput` event
        onChange: function(html){
            htmlDiv = document.getElementById('pell-html-output');
            markdownDiv = document.getElementById('pell-markdown-output');
            textDiv = document.getElementById('pell-text-output');

            htmlDiv.innerHTML = html;
            markdownDiv.innerHTML = turndownService.turndown(html);
            textDiv.innerText = html;
        },

        // <string>, optional, default = 'div'
        // Instructs the editor which element to inject via the return key
        defaultParagraphSeparator: 'div',

        // <boolean>, optional, default = false
        // Outputs <span style="font-weight: bold;"></span> instead of <b></b>
        styleWithCSS: false,

        // <Array[string | Object]>, string if overwriting, object if customizing/creating
        // action.name<string> (only required if overwriting)
        // action.icon<string> (optional if overwriting, required if custom action)
        // action.title<string> (optional)
        // action.result<Function> (required)
        // Specify the actions you specifically want (in order)
        actions: [
            'bold',
            {
                name: 'custom',
                icon: 'C',
                title: 'Custom Action',
                result: () => console.log('Do something!')
            },
            'underline'
        ],

        // classes<Array[string]> (optional)
        // Choose your custom class names
        classes: {
            actionbar: 'pell-actionbar',
            button: 'pell-button',
            content: 'pell-content',
            selected: 'pell-button-selected'
        }
    })

    // Execute a document command, see reference:
    // https://developer.mozilla.org/en/docs/Web/API/Document/execCommand
    // this is just `document.execCommand(command, false, value)`
    // pell.exec(command<string>, value<string>)

    function resizePreviewer(){
        $(".editor-previewer").css("height",function () {
            let editorHeight=$("#pell-editor").height();
            let titleHeight=$("#previewer-title").height();
            console.log($(window).height() , editorHeight, titleHeight);
            return $(window).height()-editorHeight-titleHeight;
        })
    }
    $(window).onload=resizePreviewer();
    $(window).resize=resizePreviewer();
</script>
</body>
</html>
